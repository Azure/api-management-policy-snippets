Overview
========

| Policy Name                                                                                                                                                                        | What does it do?                                                                                                                                                                                                                      |
|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <a href="Add correlation id to inbound request.policy.xml">Add correlation id to inbound request</a>                                                                               | Add Correlation Id for inbound requests                                                                                                                                                                                               |
| <a href="Authenticate using Managed Identity to access Event Hub.xml">Authenticate using Managed Identity to access Event Hub</a>                                                  | Authenticate using Managed Identity to access EventHub namespace and push messages.                                                                                                                                                   |
| <a href="Authenticate using Managed Identity to access Service Bus.xml">Authenticate using Managed Identity to access Service Bus</a>                                              | Authenticate using Managed Identity to access Service Bus and send a message to a queue/topic                                                                                                                                         |
| <a href="Authenticate using Managed Identity to access Storage Account.xml">Authenticate using Managed Identity to access Storage Account</a>                                      | Authenticate using Managed Identity to access Storage Account and perform CRUD operation on Blobs.                                                                                                                                    |
| <a href="Authorize requests using external authorizer.policy.xml">Authorize requests using external authorizer</a>                                                                 | Secure API access by using an external authorizer encapsulating custom authentication/authorization logic                                                                                                                             |
| <a href="Back-end API redundancy.policy.xml">Back-end API redundancy</a>                                                                                                           | Routes calls to the closest of two backend services, and fails over to the secondary if an HTTP 404 is returned.                                                                                                                      |
| <a href="Backend OAuth2 Authentication With Cache.policy.xml">Backend OAuth2 Authentication With Cache</a>                                                                         | Sets up Backend OAuth2 Authentication With Cache                                                                                                                                                                                      |
| <a href="Call out to an HTTP endpoint and cache the response.policy.xml">Call out to an HTTP endpoint and cache the response</a>                                                   | Enrich requests by calling HTTP endpoint before calling a backend service                                                                                                                                                             |
| <a href="Create HMAC SHA256-Signed JWT.policy.xml">Create HMAC SHA256-Signed JWT</a>                                                                                               | Creates a JSON Web Token with an HMAC SHA256 signature based on a secret from APIM Named Values                                                                                                                                       |
| <a href="DELETE a from to blobStorage account.xml">DELETE a file from your blobStorage account</a>                                                                                 | Use this policy to create a blobStorage account API abstraction and to delete a file at the configured container.                                                                                                                     |
| <a href="Encrypt data using expressions.policy.xml">Encrypt data using expressions</a>                                                                                             | Use policy expressions to encrypt a parameter using AES algorithm                                                                                                                                                                     |
| <a href="Filter on IP Address when using Application Gateway.policy.xml">Filter on IP Address when using Application Gateway</a>                                                   | Filter on IP Address when using Application Gateway                                                                                                                                                                                   |
| <a href="Filter response content based on product name.policy.xml">Filter response content based on product name</a>                                                               | Filter data elements from the response payload based on the product associated with the request                                                                                                                                       |
| <a href="Forward Azure Event Grid Event.xml">Forward Azure Event Grid Event</a>                                                                                                    | Forwards an Azure Event Grid event data payload to a downstream system and adds the event metadata to the HTTP headers.                                                                                                               |
| <a href="Forward gateway hostname to backend for generating correct urls in responses.policy.xml">Forward gateway hostname to backend for generating correct urls in responses</a> | Add a Forwarded header in the inbound request to allow the backend API to construct proper URLs                                                                                                                                       |
| <a href="Generate Azure Relay Token.policy.xml">Generate Azure Relay Token</a>                                                                                                     | Provides the capability to generate and cache an Azure Relay Token to securely connect to Azure Relay, abstracting the generation of a relay token from the clients. Provides placeholders to convert requests between JSON and XML.  |
| <a href="Generate Shared Access Signature and forward request to Azure storage.policy.xml">Generate Shared Access Signature and forward request to Azure storage</a>               | Generate Shared Access Signature and forward request to Azure Storage                                                                                                                                                                 |
| <a href="GET a file from blobStorage account.xml">GET a file from your blobStorage account</a>                                                                                     | Use this policy to create a blobStorage account API abstraction and to retrieve a file from the configured container.                                                                                                                 |
| <a href="Get OAuth2 access token from AAD and forward it to the backend.policy.xml">Get OAuth2 access token from AAD and forward it to the backend</a>                             | OAuth2 for authorization between the gateway and a backend                                                                                                                                                                            |
| <a href="Get OAuth2 access token from AAD using client id and certificate using key vault manage identity.xml">Get OAuth2 token using Certificate</a>                              | Get Certificat from KeyVault using managed identity to generate OAuth 2 token using certificate                                                                                                                                       |
| <a href="Get X-CSRF token from SAP gateway using send request.policy.xml">Get X-CSRF token from SAP gateway using send request</a>                                                 | X-CSRF token handling impemented in [SAP Principal Propagation policy](Request%20OAuth2%20access%20token%20from%20SAP%20using%20AAD%20JWT%20token.xml).                                                                                                    |
| <a href="Handle Power Query access request to custom API.policy.xml">Handle Power Query access request to custom API.policy</a>                                                 | Enable [Organizational Account login flow for Power Query](https://docs.microsoft.com/power-query/connectorauthentication#supported-workflow) for downstream APIs like SAP OData.                                                                                                    |
| <a href="List all inbound headers.policy.xml">List all inbound headers</a>                                                                                                         | Lists all inbound headers and their values.                                                                                                                                                                                           |
| <a href="Log errors to Stackify.policy.xml">Log errors to Stackify</a>                                                                                                             | Error logging policy to send errors to Stackify                                                                                                                                                                                       |
| <a href="Look up Key Vault certificate using Managed Service Identity and call backend.policy.xml">Look up Key Vault certificate using Managed Service Identity</a>                | Look up and use a Key Vault certificate using Managed Service Identity and call the backend using it as a client certificate                                                                                                          |
| <a href="Look up Key Vault secret using Managed Service Identity.policy.xml">Look up Key Vault secret using Managed Service Identity</a>                                           | Look up and use a Key Vault secret using Managed Service Identity                                                                                                                                                                     |
| <a href="Loopback request for service at same API Management service.xml">Loopback request for service at same API Management service</a>                                          | Use this policy to ensure that you can perform a request on a service that is hosted at the same API Management service instance deployed with a virtual network.                                                                     |
| <a href="Mask async calls as synchronous.policy.xml">Mask async calls as synchronous</a>                                                                                           | Mask an asynchronous API endpoint as if it is an synchronous one                                                                                                                                                                      |
| <a href="Parse a JWT token using expressions.policy.xml">Parse a JWT token using expressions</a>                                                                                   | Use policy expressions to parse a JWT token and conditionally execute policies based on values in a claim                                                                                                                             |
| <a href="Perform basic authentication.policy.xml">Perform basic authentication</a>                                                                                                 | Perform basic authentication in the inbound request                                                                                                                                                                                   |
| <a href="Pre-authorize requests based on HTTP method with validate-jwt.policy.xml">Pre-authorize requests based on HTTP method with validate-jwt</a>                               | Authorize access to specific HTTP methods on an API based on JWT claims                                                                                                                                                               |
| <a href="PUT a file to blobStorage account.xml">PUT a new file at your blobStorage account</a>                                                                                     | Use this policy to create a blobStorage account API abstraction and to create a new file at the configured container.                                                                                                                 |
| <a href="Query CosmosDB.policy.xml">Query CosmosDB</a>                                                                                                                             | Query CosmosDB                                                                                                                                                                                                                        |
| <a href="Random load balancer.policy.xml">Random load balancer</a>                                                                                                                 | Randomly routes (load balances) to one of the two backends                                                                                                                                                                            |
| <a href="Random load balancer simpler.policy.xml">Random load balancer simpler</a>                                                                                                         | Randomly overrides API base url using weighted value to effectively traffic split for canary deployments                                                                                                                              |
| <a href="Request OAuth2 access token from SAP using AAD JWT token.xml">Request OAuth2 access token from SAP using AAD JWT token</a>                                | Use this policy to perform SAP Principal Propagation (exchange AAD issued JWT token for SAP issued Bearer token), deal with X-CSRF and cache token till SAP defined expiry. It applies to all NetWeaver based systems and relies on the SAP OAuth server. Find the associated community post [here](https://blogs.sap.com/2021/08/12/.net-speaks-odata-too-how-to-implement-azure-app-service-with-sap-odata-gateway/).                                                                  |
| <a href="Return HTTP 405 if the HTTP Method of the request is not defined.xml">Return HTTP 405 if the HTTP Method of the request is not defined</a>                                | Use this policy to translates the HTTP status code from 404 to 405 when the HTTP Method of the request doesn't match the one defined in the corresponding Operation.                                                                  |
| <a href="Route requests based on size.policy.xml">Route requests based on size</a>                                                                                                 | Route requests based on the size of the message body                                                                                                                                                                                  |
| <a href="Route requests to regional backend instances.xml">Route requests based on the region</a>                                                                                  | Route requests to regional backend service deployments based on the Azure API Management instance's region they reached                                                                                                               |
| <a href="Send request context information to the backend service.policy.xml">Send request context information to the backend service</a>                                           | Sends context information to the backend service for logging or processing                                                                                                                                                            |
| <a href="Set cache duration using response cache control header.policy.xml">Set cache duration using response cache control header</a>                                             | Sets response cache duration using maxAge value in Cache-Control header sent by the backend                                                                                                                                           |
| <a href="Simple Google OAuth validate-jwt.policy.xml">Simple Google OAuth validate-jwt</a>                                                                                         | Authorize access to your endpoints using Google as an OAuth token provider                                                                                                                                                            |
| <a href="Trigger Azure Data Factory Pipeline With Parameters.policy.xml">Trigger Azure Data Factory Pipeline With Parameters</a>                                                   | Provide the capability to trigger a specific Azure Data Factory Pipeline with parameters. The authentication handshake with Azure Management REST API is handled in the policy itself so that consumers do not need to manage this    |
| <a href="Trigger Azure Data Factory Pipeline.policy.xml">Triggering an Azure Data Factory Pipeline</a>                                                                             | Provide the capability to trigger a specific Azure Data Factory Pipeline without parameters. The authentication handshake with Azure Management REST API is handled in the policy itself so that consumers do not need to manage this |
| <a href="Use custom error messages for jwt-validate policy with on-error handler.policy.xml">Use custom error messages for jwt-validate policy with on-error handler</a>           | Provides the ability to use specific error messages when errors in the jwt-validate policy occur                                                                                                                          
| <a href="Extracting multiple values from xml documents.policy.xml">Extract multiple values from xml documents</a>           | Uses an intermediate json object to provide easy access to extracted values from an xml document 
| <a href="Return a blob URL signed with a user delegation SAS token.xml">Return a blob URL signed with a user delegation SAS token</a>           | Demonstrates how to check if a blob exists and then return the URL of the blob signed with a User Delegation SAS token leveraging Managed Identity. 
